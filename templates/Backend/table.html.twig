{% extends 'Backend/layout.html.twig' %}
{#---------------------------BLOC-Title-----------------------------#}
{% block head %} <title> Page insertion </title> {% endblock %}
{#---------------------------BLOC-Title-----------------------------#}
{% block content %}
<div class="container">
    {#---------------------------SECTION-----------------------------#}
    <section class="section team-section mt-3">
        <div class="row">
            {% if data.graph.successGraph %}
            {% for succes in data.graph %}
            <div class="alert alert-primary" role="alert">
                {{succes}}
            </div>
            {% endfor %}
            {% elseif data.pageSucces %}
            {% for succes in data.pageSucces %}
            <div class="alert alert-primary" role="alert">
                {{succes}}
            </div>
            {% endfor %}
            {% elseif data.delArticle %}
            <div class="alert alert-danger" role="alert">
                {{data.delArticle.nbPost}}
            </div>
            {% elseif data.delPartenaire %}
            <div class="alert alert-danger" role="alert">
                {{data.delPartenaire.nbPartenaire}}
            </div>
            {% endif %}
            <div class="col-12">
                <div class="row">
                    <div class="col-md-12 mb-1">
                        {#---------------------------START-TABLE-CONTENT-----------------------------#}
                        <div class="classic-tabs">
                            <div class="tab-content card">
                                <div class="tab-pane fade active show"
                                    id="panel83" role="tabpanel">
                                    <div id="tableauResponsive"
                                        class="table-responsive">
                                        {#---------------------------TABLE-----------------------------#}
                                        <table class="table">
                                            {% if data.partenaire %}
                                            {#---------------------------HEAD-TABLE-Partenaire-----------------------------#}
                                            <thead>
                                                <tr>
                                                    <th>
                                                        Image
                                                    </th>
                                                    <th>
                                                        Contenu
                                                    </th>
                                                    <th>
                                                        Modification
                                                    </th>
                                                    <th>
                                                        Supprimer
                                                    </th>
                                                </tr>
                                            </thead>
                                            {#---------------------------END-HEAD-Table-----------------------------#}
                                            {#---------------------------BODY-Table-Partenaire-----------------------------#}
                                            {% for partenaires in
                                            data.partenaire %}
                                            <tbody>
                                                <tr>
                                                    <th>
                                                        {{partenaires.image}}
                                                    </th>
                                                    <td>
                                                        {{partenaires.legende}}
                                                    </td>
                                                    <td>
                                                        <a
                                                            href="http://projet5.marcalban.fr/?p=partenaire&id={{partenaires.id}}"
                                                            class="teal-text"
                                                            data-toggle="tooltip"
                                                            data-placement="top"
                                                            title="Update">
                                                            <i class="fas
                                                                fa-pencil-alt"></i></a>
                                                    </td>
                                                    <td>
                                                        <a
                                                            href="http://projet5.marcalban.fr/?p=table&liste=listePartenaires&action=delete&id={{partenaires.id}}"
                                                            class="red-text"
                                                            data-toggle="tooltip"
                                                            data-placement="top"
                                                            title="Delete"><i
                                                                class="fas
                                                                fa-times"></i></a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                            {% endfor %}
                                            {#---------------------------END-BODY-Table-----------------------------#}
                                            {% elseif data.article %}
                                            {#---------------------------HEAD-TABLE-Article-----------------------------#}
                                            <thead>
                                                <tr>
                                                    <th>
                                                        Titre
                                                    </th>
                                                    <th>
                                                        Legende
                                                    </th>
                                                    <th>
                                                        Description
                                                    </th>
                                                    <th>
                                                        Image
                                                    </th>
                                                    <th>
                                                        Date
                                                    </th>
                                                    <th>
                                                        Posté
                                                    </th>
                                                    <th>
                                                        Dernier Article
                                                    </th>
                                                    <th>
                                                        Modification
                                                    </th>
                                                    <th>
                                                        Supprimer
                                                    </th>
                                                </tr>
                                            </thead>
                                            {#---------------------------END-HEAD-Table-----------------------------#}
                                            {#---------------------------BODY-Table-Article-----------------------------#}
                                            {% for articleListe in
                                            data.article.articleAll %}
                                            <tbody>
                                                <tr>
                                                    <td>
                                                        {{articleListe.title}}
                                                    </td>
                                                    <td>
                                                        {{articleListe.legende}}
                                                    </td>
                                                    <td>
                                                        {{
                                                        articleListe.descriptionExtrait
                                                        }}
                                                    </td>
                                                    <td>
                                                        {{articleListe.image}}
                                                    </td>
                                                    <td>
                                                        {{articleListe.date|date('d/m/Y')}}
                                                    </td>
                                                    <td>
                                                        {{articleListe.posted}}
                                                    </td>
                                                    <td>
                                                        {{articleListe.lastArticle}}
                                                    </td>
                                                    <td>
                                                        <a
                                                            href="http://projet5.marcalban.fr/?p=form&id={{articleListe.id}}"
                                                            class="teal-text"
                                                            data-toggle="tooltip"
                                                            data-placement="top"
                                                            title="Update"><i
                                                                class="fas
                                                                fa-pencil-alt"></i></a>
                                                    </td>
                                                    <td>
                                                        <a
                                                            href="http://projet5.marcalban.fr/?p=table&liste=listeArticlesBack&perpage=1&action=delete&id={{articleListe.id}}"
                                                            class="red-text"
                                                            data-toggle="tooltip"
                                                            data-placement="top"
                                                            title="Delete"><i
                                                                class="fas
                                                                fa-times"></i></a>
                                                    </td>
                                                </tr>
                                            </tbody>
                                            {% endfor %}
                                            {#--------------------------END-BODY-Table-----------------------------#}
                                            {% elseif data.graphique %}
                                            {#---------------------------HEAD-TABLE-Graphique-----------------------------#}
                                            <thead>
                                                <tr>
                                                    <th>
                                                        Titre
                                                    </th>
                                                    <th>
                                                        Description
                                                    </th>
                                                    <th>
                                                        Image
                                                    </th>
                                                    <th>
                                                        Modification
                                                    </th>
                                                </tr>
                                            </thead>
                                            {#---------------------------END-HEAD-Graphique-----------------------------#}
                                            {#---------------------------BODY-Table-Graphique-----------------------------#}
                                            <tbody>
                                                {% for graphiques in
                                                data.graphique %}
                                                <tr>
                                                    <th>
                                                        {{graphiques.title}}
                                                    </th>
                                                    <td>
                                                        {{graphiques.descriptionExtrait}}
                                                    </td>
                                                    <td>
                                                        {{graphiques.image}}
                                                    </td>
                                                    <td>
                                                        <a
                                                            href="http://projet5.marcalban.fr/?p=graph&id={{graphiques.id}}"
                                                            class="teal-text"
                                                            data-toggle="tooltip"
                                                            data-placement="top"
                                                            title="Update"><i
                                                                class="fas
                                                                fa-pencil-alt"></i></a>
                                                    </td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                            {#---------------------------END-BODY-Table-----------------------------#}
                                            {% elseif data.page %}
                                            {#---------------------------HEAD-TABLE-Page-----------------------------#}
                                            <thead>
                                                <tr>
                                                    <th>
                                                        Titre de la page
                                                    </th>
                                                    <th>
                                                        Titre
                                                    </th>
                                                    <th>
                                                        Description
                                                    </th>
                                                    <th>
                                                        Image
                                                    </th>
                                                    <th>
                                                        Modification
                                                    </th>
                                                </tr>
                                            </thead>
                                            {#---------------------------END-HEAD-Table-----------------------------#}
                                            {#---------------------------BODY-Table-Page-----------------------------#}
                                            <tbody>
                                                {% for pages in
                                                data.page %}
                                                <tr>
                                                    <th>
                                                        {{pages.titlePage}}
                                                    </th>
                                                    <th>
                                                        {{pages.title}}
                                                    </th>
                                                    <td>
                                                        {{pages.descriptionExtrait}}
                                                    </td>
                                                    <td>
                                                        {{pages.image}}
                                                    </td>
                                                    <td>
                                                        <a
                                                            href="http://projet5.marcalban.fr/?p=page&title=UpdatePage&id={{pages.id}}"
                                                            class="teal-text"
                                                            data-toggle="tooltip"
                                                            data-placement="top"
                                                            title="Update"><i
                                                                class="fas
                                                                fa-pencil-alt"></i></a>
                                                    </td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                            {#---------------------------END-BODY-Table-----------------------------#}
                                            {% else %}
                                            {#---------------------------Erreur-TABLE-----------------------------#}
                                            <thead>
                                                <p><strong><center>Erreur</center></strong></p>
                                            </thead>
                                            {#---------------------------END-Erreur-Table-----------------------------#}
                                            {#---------------------------Erreur-Table-----------------------------#}
                                            <tbody>
                                                <p>
                                                    <strong>
                                                        <center>Aucune données à
                                                            cette URL !</center>
                                                    </strong>
                                                </p>
                                            </tbody>
                                            {#---------------------------END-Erreur-Table-----------------------------#}
                                            {% endif %}
                                        </table>
                                        {#---------------------------END-TABLE-----------------------------#}
                                    </div>
                                </div>
                            </div>
                        </div>
                        {#---------------------------END-START-TABLE-CONTENT-----------------------------#}
                        <br>
                        {% if data.article %}
                        {#--------------------------PAGINATION-----------------------------#}
                        <nav aria-label="Page navigation mr-auto">
                            <ul class="pagination pg-blue">
                                <li class="page-item
                                    {% if data.article.perCurrent ==
                                    1 or
                                    data.article.perCurrent <1 %}
                                    disabled
                                    {% endif %}">
                                    <a class="page-link" aria-label="Previous"
                                        href="{% if
                                        data.article.perCurrent != 1
                                        %}
                                        ?p=table&liste=listeArticlesBack&perpage={{data.article.perCurrent
                                        -
                                        1 }}
                                        {% else %}
                                        ?p=table&liste=listeArticlesBack&perpage={{data.article.perCurrent
                                        }}
                                        {% endif %}">
                                        <span aria-hidden="true">&laquo;</span>
                                        <span class="sr-only">Previous</span>
                                    </a>
                                </li>
                                {% for i in
                                1..data.article.nbPage %}
                                {% if i == data.article.perCurrent
                                %}
                                <li class="page-item active"><a
                                        class="page-link"
                                        href="?p=table&liste=listeArticlesBack&perpage={{
                                        i
                                        }}">{{ i
                                        }}</a></li>
                                {% else %}
                                <li class="page-item
                                    {% if data.article.perCurrent <1
                                    %}
                                    disabled
                                    {% endif %}"><a class="page-link"
                                        href="?p=table&liste=listeArticlesBack&perpage={{
                                        i
                                        }}">{{ i
                                        }}</a></li>
                                {% endif %}
                                {% endfor %}

                                <li class="page-item
                                    {% if data.article.perCurrent ==
                                    data.article.nbPage %}
                                    disabled
                                    {% endif %}">
                                    <a class="page-link" aria-label="Next"
                                        href="{% if
                                        data.article.perCurrent !=
                                        data.article.nbPage %}
                                        ?p=table&liste=listeArticlesBack&perpage={{data.article.perCurrent
                                        +
                                        1 }}
                                        {% else %}
                                        ?p=table&liste=listeArticlesBack&perpage={{data.article.perCurrent
                                        }}
                                        {% endif %}">
                                        <span aria-hidden="true">&raquo;</span>
                                        <span class="sr-only">Next</span>
                                    </a>
                                </li>
                            </ul>
                        </nav>
                        {#-------------------------END-PAGINATION-----------------------------#}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </section>
    {#---------------------------END-SECTION-----------------------------#}
</div>
{% endblock %}